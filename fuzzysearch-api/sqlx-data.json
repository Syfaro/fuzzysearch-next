{
  "db": "PostgreSQL",
  "152ad46991ddb5719cf33c05a56dab2e5d79dd923b180088a9a10b40f551bc22": {
    "describe": {
      "columns": [
        {
          "name": "username",
          "ordinal": 0,
          "type_info": "Text"
        }
      ],
      "nullable": [
        false
      ],
      "parameters": {
        "Left": [
          "Uuid"
        ]
      }
    },
    "query": "SELECT username FROM api.account WHERE id = $1;\n"
  },
  "1b4a4bad98f8468110db4c8feb0dd362d81d0b631645174df2d9388cb58f7069": {
    "describe": {
      "columns": [
        {
          "name": "data",
          "ordinal": 0,
          "type_info": "Jsonb"
        }
      ],
      "nullable": [
        true
      ],
      "parameters": {
        "Left": [
          "Text"
        ]
      }
    },
    "query": "SELECT\n    data\nFROM\n    api.session\nWHERE\n    id = $1\n    AND (\n        expires_at IS NULL\n        OR expires_at > current_timestamp\n    );\n"
  },
  "4bb7283010fced13ea782c734de941b57a7211a67bb044713ec8b743639c011d": {
    "describe": {
      "columns": [
        {
          "name": "id",
          "ordinal": 0,
          "type_info": "Uuid"
        },
        {
          "name": "account_id",
          "ordinal": 1,
          "type_info": "Uuid"
        },
        {
          "name": "token",
          "ordinal": 2,
          "type_info": "Text"
        },
        {
          "name": "name",
          "ordinal": 3,
          "type_info": "Text"
        },
        {
          "name": "name_limit",
          "ordinal": 4,
          "type_info": "Int4"
        },
        {
          "name": "image_limit",
          "ordinal": 5,
          "type_info": "Int4"
        },
        {
          "name": "hash_limit",
          "ordinal": 6,
          "type_info": "Int4"
        }
      ],
      "nullable": [
        false,
        false,
        false,
        false,
        false,
        false,
        false
      ],
      "parameters": {
        "Left": [
          "Uuid"
        ]
      }
    },
    "query": "SELECT\n    key.id,\n    account_id,\n    token,\n    name,\n    name_limit,\n    image_limit,\n    hash_limit\nFROM\n    api.key\n    JOIN api.account ON account.id = key.account_id\nWHERE\n    account.id = $1\n    AND deleted_at IS NULL\nORDER BY\n    key.id;\n"
  },
  "538edf0a2ea5081d73fdf50d1ae5ce79a41f78bac285a690759a7df04bc5f6ff": {
    "describe": {
      "columns": [],
      "nullable": [],
      "parameters": {
        "Left": [
          "Text",
          "Timestamptz",
          "Jsonb"
        ]
      }
    },
    "query": "INSERT INTO\n    api.session (id, expires_at, data)\nVALUES\n    ($1, $2, $3) ON CONFLICT (id) DO\nUPDATE\nSET\n    expires_at = EXCLUDED.expires_at,\n    data = EXCLUDED.data;\n"
  },
  "7893263d635bc047b7b5ccd0698188491091741ac3dc1599d9493e9f209804b5": {
    "describe": {
      "columns": [
        {
          "name": "id",
          "ordinal": 0,
          "type_info": "Uuid"
        },
        {
          "name": "credential",
          "ordinal": 1,
          "type_info": "Jsonb"
        }
      ],
      "nullable": [
        false,
        false
      ],
      "parameters": {
        "Left": [
          "Bytea"
        ]
      }
    },
    "query": "SELECT\n    account.id,\n    webauthn_credential.credential\nFROM\n    api.webauthn_credential\n    JOIN api.account ON account.id = webauthn_credential.account_id\nWHERE\n    webauthn_credential.id = $1;\n"
  },
  "7bc8b156205a5570ea9423a38fe74cef0945ab6d6364a391d2c71d04ebde2479": {
    "describe": {
      "columns": [],
      "nullable": [],
      "parameters": {
        "Left": [
          "Uuid",
          "Text",
          "Text"
        ]
      }
    },
    "query": "INSERT INTO\n    api.key (\n        account_id,\n        name,\n        token,\n        name_limit,\n        image_limit,\n        hash_limit\n    )\nVALUES\n    ($1, $2, $3, 60, 60, 30);\n"
  },
  "7c8504090859e5bcd15db8a2ceb49352ca112a91b23d4b92e6195c8918d750ad": {
    "describe": {
      "columns": [
        {
          "name": "id",
          "ordinal": 0,
          "type_info": "Uuid"
        }
      ],
      "nullable": [
        false
      ],
      "parameters": {
        "Left": [
          "Bytea"
        ]
      }
    },
    "query": "SELECT\n    account.id\nFROM\n    api.webauthn_credential\n    JOIN api.account ON account.id = webauthn_credential.account_id\nWHERE\n    webauthn_credential.id = $1;\n"
  },
  "86a04a53cbdb700b651308497de571a223354675024d43d973e71a6122c4482a": {
    "describe": {
      "columns": [
        {
          "name": "id",
          "ordinal": 0,
          "type_info": "Uuid"
        },
        {
          "name": "registered_at",
          "ordinal": 1,
          "type_info": "Timestamptz"
        }
      ],
      "nullable": [
        false,
        true
      ],
      "parameters": {
        "Left": [
          "Text"
        ]
      }
    },
    "query": "SELECT id, registered_at FROM api.account WHERE lower(username) = lower($1);\n"
  },
  "8f00059cc16cef282c78da7afd7fdc70b6a5621f74bf4d4e52d0e48ba6ecf44d": {
    "describe": {
      "columns": [],
      "nullable": [],
      "parameters": {
        "Left": []
      }
    },
    "query": "TRUNCATE TABLE session;\n"
  },
  "9cdcee3a19219425081c8438dce9bca990704ffafed1610dcaac3549769b7c9c": {
    "describe": {
      "columns": [
        {
          "name": "credential",
          "ordinal": 0,
          "type_info": "Jsonb"
        }
      ],
      "nullable": [
        false
      ],
      "parameters": {
        "Left": [
          "Text"
        ]
      }
    },
    "query": "SELECT\n    credential\nFROM\n    api.webauthn_credential\n    JOIN api.account ON account.id = webauthn_credential.account_id\nWHERE\n    lower(account.username) = lower($1);\n"
  },
  "b09b957386ed3641e5bbb5a1deb95541b9edb90a7406ca8c6abe795235b98be1": {
    "describe": {
      "columns": [
        {
          "name": "count",
          "ordinal": 0,
          "type_info": "Int8"
        }
      ],
      "nullable": [
        null
      ],
      "parameters": {
        "Left": [
          "Uuid"
        ]
      }
    },
    "query": "SELECT\n    count(*)\nFROM\n    api.key\nWHERE\n    account_id = $1\n    AND deleted_at IS NULL;\n"
  },
  "b354da881459a419ff001b850802b31b35b53ec729821fcd52f969ecf6fd0c5d": {
    "describe": {
      "columns": [],
      "nullable": [],
      "parameters": {
        "Left": [
          "Text"
        ]
      }
    },
    "query": "DELETE FROM api.session WHERE id = $1;\n"
  },
  "b7980691ca115020173cb5660e488981e487884a1060e4e177c787b86b81b01d": {
    "describe": {
      "columns": [
        {
          "name": "group_name",
          "ordinal": 0,
          "type_info": "Text"
        },
        {
          "name": "count",
          "ordinal": 1,
          "type_info": "Int4"
        }
      ],
      "nullable": [
        false,
        false
      ],
      "parameters": {
        "Left": [
          "Uuid",
          "Int8",
          "Json"
        ]
      }
    },
    "query": "WITH requested_bucket AS (\n\tSELECT * FROM json_to_recordset($3::json)\n\t\tAS requested_bucket (bucket text, count integer)\n)\nINSERT INTO api.rate_limit (key_id, time_window, group_name, count)\n\tSELECT $1, $2, requested_bucket.bucket, requested_bucket.count FROM requested_bucket\n\tON CONFLICT ON CONSTRAINT unique_window DO UPDATE SET count = rate_limit.count + EXCLUDED.count\n\tRETURNING rate_limit.group_name, rate_limit.count;\n"
  },
  "b918bb9a13448395975cf89439e2652500bfe2b2024639ca6c713f54fad1ad12": {
    "describe": {
      "columns": [],
      "nullable": [],
      "parameters": {
        "Left": [
          "Uuid",
          "Bytea",
          "Jsonb"
        ]
      }
    },
    "query": "INSERT INTO api.webauthn_credential\n    (id, account_id, credential)\nVALUES\n    ($2, $1, $3);\n"
  },
  "d53943e9b9dd2de797a5189edbed74657de0f36aad0f79e1a21b8f39e2ad4f6b": {
    "describe": {
      "columns": [
        {
          "name": "name",
          "ordinal": 0,
          "type_info": "Text"
        }
      ],
      "nullable": [
        false
      ],
      "parameters": {
        "Left": [
          "Uuid",
          "Uuid"
        ]
      }
    },
    "query": "UPDATE\n    api.key\nSET\n    deleted_at = current_timestamp\nWHERE\n    id = $1\n    AND account_id = $2\nRETURNING\n    name;\n"
  },
  "dfc96998b770ae9333c6cc964886a22fc63176725cf4be7083a9ffd24316e70e": {
    "describe": {
      "columns": [],
      "nullable": [],
      "parameters": {
        "Left": []
      }
    },
    "query": "DELETE FROM api.session WHERE expires_at < current_timestamp;\n"
  },
  "e182a0ff4e44200c51aae2879d5dd8a3fcf9e019ed01642ed4011c4140850100": {
    "describe": {
      "columns": [
        {
          "name": "url",
          "ordinal": 0,
          "type_info": "Text"
        }
      ],
      "nullable": [
        false
      ],
      "parameters": {
        "Left": []
      }
    },
    "query": "SELECT\n    url\nFROM\n    api.dump\nORDER BY\n    created_at DESC\nLIMIT\n    1;\n"
  },
  "e1f67ac10c6f0e403f421f174147fba42da062317112abf870d96cb61b0296a7": {
    "describe": {
      "columns": [
        {
          "name": "id",
          "ordinal": 0,
          "type_info": "Uuid"
        }
      ],
      "nullable": [
        false
      ],
      "parameters": {
        "Left": [
          "Text"
        ]
      }
    },
    "query": "INSERT INTO\n    api.account (username)\nVALUES\n    ($1) RETURNING id;\n"
  },
  "f32e8df3c4cb28dc20e3c198bd7a6c0ed00ce89c7d8ad0b3932a1d3712c46151": {
    "describe": {
      "columns": [
        {
          "name": "id",
          "ordinal": 0,
          "type_info": "Uuid"
        },
        {
          "name": "account_id",
          "ordinal": 1,
          "type_info": "Uuid"
        },
        {
          "name": "token",
          "ordinal": 2,
          "type_info": "Text"
        },
        {
          "name": "name",
          "ordinal": 3,
          "type_info": "Text"
        },
        {
          "name": "name_limit",
          "ordinal": 4,
          "type_info": "Int4"
        },
        {
          "name": "image_limit",
          "ordinal": 5,
          "type_info": "Int4"
        },
        {
          "name": "hash_limit",
          "ordinal": 6,
          "type_info": "Int4"
        }
      ],
      "nullable": [
        false,
        false,
        false,
        false,
        false,
        false,
        false
      ],
      "parameters": {
        "Left": [
          "Text"
        ]
      }
    },
    "query": "SELECT id, account_id, token, name, name_limit, image_limit, hash_limit FROM api.key WHERE token = $1;\n"
  }
}